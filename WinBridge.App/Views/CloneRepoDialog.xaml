<ContentDialog
    x:Class="WinBridge.App.Views.CloneRepoDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WinBridge.App.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Cloner un Dépôt GitHub"
    PrimaryButtonText="Cloner"
    CloseButtonText="Annuler"
    DefaultButton="Primary"
    IsPrimaryButtonEnabled="False">

    <Grid RowSpacing="16" Width="400">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Step 1: URL Input -->
        <StackPanel Spacing="8">
            <TextBlock Text="URL du Dépôt GitHub" Style="{StaticResource BodyStrongTextBlockStyle}"/>
            <Grid ColumnSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="RepoUrlBox" PlaceholderText="https://github.com/owner/repo" TextChanged="RepoUrlBox_TextChanged"/>
                <Button x:Name="CheckButton" Click="CheckButton_Click" IsEnabled="False" Style="{StaticResource AccentButtonStyle}">
                    <SymbolIcon Symbol="Forward"/>
                </Button>
            </Grid>
            <ProgressBar x:Name="LoadingBar" IsIndeterminate="True" Visibility="Collapsed"/>
            <TextBlock x:Name="StatusText" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
        </StackPanel>

        <!-- Step 2: Branch Selection -->
        <StackPanel Grid.Row="1" Spacing="8" x:Name="BranchPanel" Visibility="Collapsed">
            <TextBlock Text="Branche" Style="{StaticResource BodyStrongTextBlockStyle}"/>
            <ComboBox x:Name="BranchBox" HorizontalAlignment="Stretch" SelectionChanged="BranchBox_SelectionChanged"/>
            <TextBlock x:Name="DefaultBranchText" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
        </StackPanel>

        <!-- Step 3: Destination -->
        <StackPanel Grid.Row="2" Spacing="8" x:Name="DestinationPanel" Visibility="Collapsed">
            <TextBlock Text="Dossier de Destination" Style="{StaticResource BodyStrongTextBlockStyle}"/>
            <Grid ColumnSpacing="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="DestinationBox" IsReadOnly="True" PlaceholderText="Sélectionnez un dossier..."/>
                <Button Click="BrowseButton_Click">
                    <SymbolIcon Symbol="Folder"/>
                </Button>
            </Grid>
        </StackPanel>
    </Grid>
</ContentDialog>
